@model IEnumerable<GoodsAccountingSystem.ViewModels.UserViewModel>
@using GoodsAccountingSystem.Helpers
@{
    ViewBag.Title = "Список пользователей";
}

<div>
    <h2 class="text-center">Список пользователей</h2>
</div>

<table class="table table-bordered table-hover table-edit">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Email)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.FirstName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.SecondName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.MiddleName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Roles)
            </th>
            <th>
                <button type="button" class="btn btn-success" onclick="showModal('@Constants.USERS','@Constants.CREATE')"><i class="fas fa-plus"></i></button>
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var user in Model)
        {
            <tr onclick="showModal('@Constants.USERS','@Constants.EDIT')">
                <td>
                    @Html.DisplayFor(userd => user.Email)
                </td>
                <td>
                    @Html.DisplayFor(userd => user.FirstName)
                </td>
                <td>
                    @Html.DisplayFor(userd => user.SecondName)
                </td>
                <td>
                    @Html.DisplayFor(userd => user.MiddleName)
                </td>
                <td>
                    @Html.DisplayFor(userd => user.Roles)
                </td>
                @*<td>
                        <form asp-action="Delete" asp-route-id="@user.Id" method="post">
                            <a class="btn btn-sm btn-primary" asp-action="Edit" asp-route-id="@user.Id">Изменить</a>
                            <button type="submit" class="btn btn-sm btn-danger">
                                Удалить
                            </button>
                        </form>
                    </td>*@
                <td onclick="event.stopPropagation()">
                    <button type="button" class="btn btn-danger" onclick="showModal('@Constants.USERS','@Constants.DELETE','@user.Id')"><i class="fas fa-user-times"></i></button>
                </td>
            </tr>
        }
    </tbody>
    @{
        //var grid = new WebGrid(source: ViewBag.list, canPage: true, rowsPerPage: 1);
        //grid.Pager(WebGridPagerModes.NextPrevious);
    }
</table>

<partial name="_FormScripts" />
@section Scripts {
    <partial name="_HandleErrorModal" />
}